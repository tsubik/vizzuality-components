{"version":3,"file":"index.esm.js","sources":["../../../../../../src/components/legend/components/legend-item-toolbar/legend-item-button-opacity/legend-item-button-opacity-tooltip/index.js"],"sourcesContent":["import React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\nimport Slider from 'components/slider';\nimport './styles.scss';\n\nclass LegendOpacityTooltip extends PureComponent {\n  static propTypes = {\n    // Layers\n    activeLayer: PropTypes.shape({}).isRequired,\n    min: PropTypes.number,\n    max: PropTypes.number,\n    step: PropTypes.number,\n    // Callback to call when the layer changes with\n    // the ID of the dataset and the ID of the layer\n    onChangeOpacity: PropTypes.func.isRequired,\n  };\n\n  static defaultProps = {\n    min: 0,\n    max: 1,\n    step: 0.01,\n  };\n\n  constructor(props) {\n    super(props);\n\n    const { activeLayer = {} } = this.props;\n    const { opacity } = activeLayer;\n\n    this.state = {\n      opacity: typeof opacity !== 'undefined' ? opacity : 1,\n    };\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    const {\n      activeLayer: { opacity },\n    } = this.props;\n    const {\n      activeLayer: { opacity: prevOpacity },\n    } = prevProps;\n    const { opacity: stateOpacity } = this.state;\n    const { opacity: prevStateOpacity } = prevState;\n\n    if (opacity !== prevOpacity && stateOpacity === prevStateOpacity) {\n      this.setState({ opacity });\n    }\n  }\n\n  onChange = (v) => {\n    const { activeLayer, onChangeOpacity } = this.props;\n    onChangeOpacity(activeLayer, v);\n  };\n\n  render() {\n    const { min, max, step, ...rest } = this.props;\n    const { opacity } = this.state;\n\n    return (\n      <div\n        styleName=\"c-legend-item-button-opacity-tooltip\"\n        ref={(node) => {\n          this.el = node;\n        }}\n      >\n        Opacity\n        <div styleName=\"slider-tooltip-container\">\n          <Slider\n            marks={{\n              [min]: '0%',\n              [max]: '100%',\n            }}\n            min={min}\n            max={max}\n            step={step}\n            value={opacity}\n            formatValue={(perc) => `${Math.round(perc * 100)}%`}\n            onChange={(value) => this.setState({ opacity: value })}\n            onAfterChange={this.onChange}\n            trackStyle={{\n              backgroundColor: '#c32d7b',\n              borderRadius: '0px',\n            }}\n            {...rest}\n          />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default LegendOpacityTooltip;\n"],"names":["LegendOpacityTooltip","props","v","activeLayer","onChangeOpacity","opacity","state","prevProps","prevState","prevOpacity","stateOpacity","prevStateOpacity","setState","min","max","step","rest","node","el","perc","Math","round","value","onChange","backgroundColor","borderRadius","PureComponent","PropTypes","shape","isRequired","number","func"],"mappings":"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"}