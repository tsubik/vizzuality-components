{"version":3,"file":"utils.esm.js","sources":["../../../../src/components/legend/components/legend-item-timestep/utils.js"],"sourcesContent":["import dayjs from 'dayjs';\n\n/**\n * Translate Moment units into DayJS units\n */\nconst getDayJsInterval = (interval) => {\n  // Shorthand units don't have to be translated\n  const momentToDayJSUnit = {\n    years: 'year',\n    quarters: 'quarter',\n    months: 'month',\n    weeks: 'week',\n    days: 'day',\n    hours: 'hour',\n    minutes: 'minute',\n    seconds: 'second',\n    milliseconds: 'millisecond',\n  };\n\n  return momentToDayJSUnit[interval] || interval;\n};\n\nexport const addToDate = (date, count, interval = 'days', toEnd) => {\n  const d = dayjs(date);\n\n  return toEnd\n    ? d.add(count, getDayJsInterval(interval)).endOf(getDayJsInterval(interval))\n    : d.add(count, getDayJsInterval(interval));\n};\n\nexport const formatDate = (date, format = 'YYYY-MM-DD') => {\n  return dayjs(date).format(format);\n};\n\nexport const formatDatePretty = (date, dateFormat = 'YYYY-MM-DD') => {\n  const d = dayjs(date);\n  const hasDays = dateFormat.includes('DD');\n  const hasMonths = dateFormat.includes('MM');\n\n  const months = [\n    'JAN',\n    'FEB',\n    'MAR',\n    'APR',\n    'MAY',\n    'JUN',\n    'JUL',\n    'AUG',\n    'SEPT',\n    'OCT',\n    'NOV',\n    'DEC',\n  ];\n  const day = d.format('DD');\n  const month = d.month();\n  const year = d.year();\n\n  return `${hasDays ? `${day} ` : ''}${hasMonths ? `${months[month]} ` : ''}${year}`;\n};\n\n// startDate and endDate are string dates\nexport const dateDiff = (startDate, endDate, interval) => {\n  const diff = dayjs(endDate).diff(dayjs(startDate), getDayJsInterval(interval));\n\n  return diff * -1;\n};\n\nexport const getTicks = (timelineConfig = {}) => {\n  const { minDate, maxDate, interval, marks, dateFormat } = timelineConfig;\n\n  // If user defines their own markers let's parse them if he pass a date as a value\n  if (marks) {\n    const newMarks = Object.keys(marks).reduce((acc, m) => {\n      if (typeof m === 'string') {\n        const key = dayjs(m).diff(dayjs(minDate), getDayJsInterval(interval));\n\n        return {\n          ...acc,\n          [key]: marks[m],\n        };\n      }\n\n      return {\n        ...acc,\n        [m]: marks[m],\n      };\n    }, {});\n\n    return newMarks;\n  }\n\n  // Otherwise, let's add default marks at the begginig and the end\n  const minMark = 0;\n  const maxMark = dayjs(maxDate).diff(dayjs(minDate), getDayJsInterval(interval));\n\n  const newMarks = {\n    [minMark]: {\n      label: dayjs(minDate).format(dateFormat),\n    },\n    [maxMark]: {\n      label: dayjs(maxDate).format(dateFormat),\n    },\n  };\n\n  return newMarks;\n};\n\n// startDate and endDate are string dates\nexport const gradientConverter = (gradient, minDate, interval) =>\n  Object.keys(gradient).reduce(\n    (acc, val) => ({\n      ...acc,\n      [dateDiff(val, minDate, interval)]: gradient[val],\n    }),\n    {}\n  );\n"],"names":["getDayJsInterval","interval","momentToDayJSUnit","years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds","addToDate","date","count","toEnd","d","dayjs","add","endOf","formatDate","format","formatDatePretty","dateFormat","hasDays","includes","hasMonths","day","month","year","dateDiff","startDate","endDate","diff","getTicks","timelineConfig","minDate","maxDate","marks","newMarks","Object","keys","reduce","acc","m","key","minMark","maxMark","label","gradientConverter","gradient","val"],"mappings":"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"}